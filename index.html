<html>
<head>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    
</head>
<body onresize="check_book()" onload="check_book()">
<div class="bookmark" id="bookmark"></div>
<div class="book" id="journal">
<div class="page" id="daily">
<div class="days">

<div class="day">
  <div class="line title">
    <div class="heavy" id="date"></div>
    <div class="text" contenteditable="true" style="text-align: right; font-style: italic;">quote of the day</div>
  </div>
  <div class="line" id="first.line">
      <svg id="first" class="bullet" checked="0" xmlns="http://www.w3.org/2000/svg" version="1.0"  width="50" height="20" viewBox="0 0 50 20">
        <path d="M 24 4 h10 v10 h-10 v-10" class="dot" id="first.checkers" />
        <path d="M 25 7 L29 11 L35 1" class="check" id="first.check" />
        <path d="M 40 14 C 44 10, 44 8, 40 4 m -2 4 l2 -4 l4 2" id="first.change" class="change" stroke="#333" stroke-width="0.4" fill="transparent"/>
        <path d="M 19 9 l -5 0 M 16.5 6.5 l 0 5" class="plus" id="first.plus" />
        <path d="M 5 6.5 l 5 5 M 10 6.5 l -5 5" class="ex" id="first.ex" />
      </svg>
    <div class="text" contenteditable="true">
      task 1
    </div>
    
      <div class="line">
          <svg id="first" class="bullet" checked="0" xmlns="http://www.w3.org/2000/svg" version="1.0"  width="50" height="20" viewBox="0 0 50 20">
            <path d="M 24 4 h10 v10 h-10 v-10" class="dot" id="first.checkers" />
            <path d="M 25 7 L29 11 L35 1" class="check" id="first.check" />
            <path d="M 40 14 C 44 10, 44 8, 40 4 m -2 4 l2 -4 l4 2" id="first.change" class="change" stroke="#333" stroke-width="0.4" fill="transparent"/>
            <path d="M 19 9 l -5 0 M 16.5 6.5 l 0 5" class="plus" id="first.plus" />
            <path d="M 5 6.5 l 5 5 M 10 6.5 l -5 5" class="ex" id="first.ex" />
          </svg>
        <div class="text" contenteditable="true">
          subtask 1
        </div>
      </div>
    
      <div class="line">
          <svg id="first" class="bullet" checked="0" xmlns="http://www.w3.org/2000/svg" version="1.0"  width="50" height="20" viewBox="0 0 50 20">
            <path d="M 24 4 h10 v10 h-10 v-10" class="dot" id="first.checkers" />
            <path d="M 25 7 L29 11 L35 1" class="check" id="first.check" />
            <path d="M 40 14 C 44 10, 44 8, 40 4 m -2 4 l2 -4 l4 2" id="first.change" class="change" stroke="#333" stroke-width="0.4" fill="transparent"/>
            <path d="M 19 9 l -5 0 M 16.5 6.5 l 0 5" class="plus" id="first.plus" />
            <path d="M 5 6.5 l 5 5 M 10 6.5 l -5 5" class="ex" id="first.ex" />
          </svg>
        <div class="text" contenteditable="true">
          subtask 2
        </div>
      </div>
      <div class="line">
          <svg id="first" class="bullet" checked="0" xmlns="http://www.w3.org/2000/svg" version="1.0"  width="50" height="20" viewBox="0 0 50 20">
            <path d="M29 11.5 c -1.8 0, -2.4 -1.2, -2.4 -2.4 c 0 -1.8, 1.2 -2.4, 2.4 -2.4 c 1.8 0, 2.4 1.2, 2.4 2.4 c 0 1.8, -1.2 2.4, -2.4 2.4" class="dot" id="first.checkers" />
            <path d="M 25 7 L29 11 L35 1" class="check" id="first.check" />
            <path d="M 40 14 C 44 10, 44 8, 40 4 m -2 4 l2 -4 l4 2" id="first.change" class="change" stroke="#333" stroke-width="0.4" fill="transparent"/>
            <path d="M 19 9 l -5 0 M 16.5 6.5 l 0 5" class="plus" id="first.plus" />
            <path d="M 5 6.5 l 5 5 M 10 6.5 l -5 5" class="ex" id="first.ex" />
          </svg>
        <div class="text" contenteditable="true">
          note 1
        </div>
      </div>
  </div>
</div>

</div>
</div>
</div>
<script>

var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
var shapes = ["M24 4 h10 v10 h-10 v-10",
              "M29 14 c -3 0, -5 -2, -5 -5 c 0 -3, 2 -5, 5 -5 c 3 0, 5 2, 5 5 c 0 3, -2 5, -5 5",
              "M29 11.5 c -1.8 0, -2.4 -1.2, -2.4 -2.4 c 0 -1.8, 1.2 -2.4, 2.4 -2.4 c 1.8 0, 2.4 1.2, 2.4 2.4 c 0 1.8, -1.2 2.4, -2.4 2.4"]
var fills = ["#fff",
             "#fff",
             "#333"]
var checks = ["M 25 7 L29 11 L35 1",
              "M29 11.5 c -1.8 0, -2.4 -1.2, -2.4 -2.4 c 0 -1.8, 1.2 -2.4, 2.4 -2.4 c 1.8 0, 2.4 1.2, 2.4 2.4 c 0 1.8, -1.2 2.4, -2.4 2.4",
              "M29 11.5 c -1.8 0, -2.4 -1.2, -2.4 -2.4 c 0 -1.8, 1.2 -2.4, 2.4 -2.4 c 1.8 0, 2.4 1.2, 2.4 2.4 c 0 1.8, -1.2 2.4, -2.4 2.4"]
var check_fills = ["",
                   "rgb(45, 65, 205)",
                   "rgb(45, 65, 205)"]

today =  new Date();
y = today.getFullYear();
m = today.getMonth() + 1;
d = today.getDate();
var day = days[ today.getDay() ];
document.getElementById("date").innerHTML = day + " (" + m + "/" + d + "/" + y + ")";

function check_book() {
    var w = window.outerWidth;
    var h = window.outerHeight;
    if (w > 800) {
      journal = document.getElementById("journal");
      journal.style.borderLeft = "10px solid #123";
      journal.style.borderTopLeftRadius = "20px";
      journal.style.borderBottomLeftRadius = "20px";
      daily = document.getElementById("daily");
      daily.style.width = "50%";
      daily.style.left  = "50%";
      daily.style.right  = "20px";
      bookmark = document.getElementById("bookmark");
      bookmark.style.left = '' + parseInt(w/2-15);
    }
    else {
      journal = document.getElementById("journal");
      journal.style.borderLeft = "0";
      journal.style.borderTopLeftRadius = "0";
      journal.style.borderBottomLeftRadius = "0";
      daily = document.getElementById("daily");
      daily.style.width = "100%";
      daily.style.left = "0";
      daily.style.right  = "20px";
      bookmark = document.getElementById("bookmark");
      bookmark.style.left = "0";
    }
}



$(document).ready(function(){
  $( ".dot" ).click(box_click); 
  $( ".check" ).click(box_click); 
  $( ".change" ).click(bullet_change); 
  $( ".plus" ).click(add_line); 
});

function add_line(event) {
  var boss = event.target.id.split(".")[0];
  line = document.getElementById(boss+".line");
  console.log('adding line');
  line.innerHTML = line.innerHTML + ' <div class="line"><svg id="first" class="bullet" checked="0" xmlns="http://www.w3.org/2000/svg" version="1.0"  width="50" height="20" viewBox="0 0 50 20"><path d="M29 11.5 c -1.8 0, -2.4 -1.2, -2.4 -2.4 c 0 -1.8, 1.2 -2.4, 2.4 -2.4 c 1.8 0, 2.4 1.2, 2.4 2.4 c 0 1.8, -1.2 2.4, -2.4 2.4" class="dot" id="first.checkers" /><path d="M 25 7 L29 11 L35 1" class="check" id="first.check" /><path d="M 40 14 C 44 10, 44 8, 40 4 m -2 4 l2 -4 l4 2" id="first.change" class="change" stroke="%23333" stroke-width="0.4" fill="transparent"/><path d="M 19 9 l -5 0 M 16.5 6.5 l 0 5" class="plus" id="first.plus" /><path d="M 5 6.5 l 5 5 M 10 6.5 l -5 5" class="ex" id="first.ex" /></svg><div class="text" contenteditable="true">note 2</div></div>';
}

function box_click(event) {
  var boss = event.target.id.split(".")[0]
  check = document.getElementById(boss);
  console.log('checking');
  if (check.checked === 1) {
    console.log('not checked')
    check.checked = 0;
    document.getElementById(check.id+".check").style.visibility = 'hidden';
  }
  else {
    console.log('check');
    check.checked = 1;
    document.getElementById(check.id+".check").style.visibility = 'visible';
  }
}

function bullet_change(event) {
  var boss = event.target.id.split(".")[0]
  box = document.getElementById(document.getElementById(boss).id+".checkers");
  check = document.getElementById(document.getElementById(boss).id+".check");
  console.log('changing');
  for (i = 0; i < shapes.length; i++) {
    if (box.getAttribute('d') === shapes[i]) {
      break;
    }
  }
  i += -1;
  if (i < 0) {i = shapes.length-1;}
  box.setAttribute('d', shapes[i]);
  box.style.fill = fills[i];
  check.setAttribute('d', checks[i]);
  check.style.fill = check_fills[i];

}

</script>

</body>
</html>